<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Imagen</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="nav-item">
            <div id="img_logo">
                <a href="../index.html"><img src="img/logo_oscuro.png" alt="Pictoteca Logo"></a>
            </div>
            <div class="header-img" >
                <a href="../index.html">
                    <img src="img/casa.png" alt="Inicio">
                    <span>Inicio</span>
                </a>
            </div>
            <div id="crea-div"></div>
            <div class="header-img">
                <a href="explora.html">
                    <img src="img/explora.png" alt="Explorar">
                    <span>Explorar</span>
                </a>
            </div>
            <div id="session_info"></div>
        </div>
    </header>
    <main class="nuevo-main">
    <h1 id="crea">Crea una publicación</h1>
    <form class="nuevo-form" action="/php/subir_imagen.php" method="post" enctype="multipart/form-data">
        <label for="nombre">Nombre de la Imagen</label>
        <input type="text" id="nombre" name="nombre" required><br><br>

        <label for="descripcion">Descripción</label>
        <textarea id="descripcion" name="descripcion" required></textarea><br><br>
        
        <label for="nombre">Etiquetas (hasta tres como máximo)</label> <br>
        <input type="text" id="nombre" name="etiqueta1">
        <input type="text" id="nombre" name="etiqueta2">
        <input type="text" id="nombre" name="etiqueta3"><br><br>

        <label for="archivo">Seleccionar Imagen</label>
        <input type="file" id="archivo" name="archivo" accept="image/png, image/jpeg, image/jfif" required><br><br>

        <input type="submit" value="Subir Imagen">
    </form>
    </main>
    <script src="js/session2.js"></script>
    <script src="js/crear.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        fetch('/php/username.php')
            .then(response => response.json())
            .then(data => {
                if (data.username) {
                    username = data.username;
                }
                else{
                    window.location.href='/index.html';
                }
            })
            .catch(error => console.error('Error obteniendo el username:', error));
        });
    </script>
</body>
</html>